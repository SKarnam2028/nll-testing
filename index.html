<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Neo-Latin Lexicon</title>
<style>
body {
    font-family: system-ui, -apple-system, Segoe UI, sans-serif;
    margin: 2em;
    background: #f8f9fa;
}

h1 {
    margin-bottom: 0.2em;
}

#search {
    width: 100%;
    font-size: 1.2em;
    padding: 0.6em;
    margin: 1em 0;
}

.entry {
    background: white;
    margin-bottom: 1em;
    padding: 1em;
    border-radius: 6px;
    box-shadow: 0 0 5px rgba(0,0,0,0.05);
}

.headword {
    font-size: 1.4em;
    font-weight: bold;
}

.domains {
    color: #555;
    font-size: 0.9em;
    margin-bottom: 0.5em;
}

.term {
    margin-left: 1em;
    padding-left: 0.5em;
    border-left: 3px solid #ddd;
    margin-bottom: 0.5em;
}

.latin {
    font-weight: bold;
}
</style>
</head>

<body>
<h1>Neo-Latin Lexicon</h1>
<input id="search" placeholder="Search headword, Latin, or notes…">

<div id="results"></div>

<script>
let lexicon = [];

fetch("lexicon.json")
  .then(r => r.json())
  .then(data => {
      lexicon = data;
      render(lexicon);
  });

function render(entries) {
    const out = document.getElementById("results");
    out.innerHTML = "";

    for (const e of entries) {
        const div = document.createElement("div");
        div.className = "entry";

        div.innerHTML = `
            <div class="headword">${e.headword}</div>
            <div class="domains">${e.domains.filter(x=>x).join(" · ")}</div>
        `;

        for (const t of e.terms) {
            const d = document.createElement("div");
            d.className = "term";
            d.innerHTML = `
                <div class="latin">${t.macronized || t.latin}</div>
                <div>${t.grammar || ""}</div>
                <div>${t.citation || ""}</div>
                <div>${t.notes || ""}</div>
            `;
            div.appendChild(d);
        }

        out.appendChild(div);
    }
}

document.getElementById("search").addEventListener("input", function() {
    const q = this.value.toLowerCase();

    const filtered = lexicon.filter(e => {
        if (e.headword.toLowerCase().includes(q)) return true;

        for (const t of e.terms) {
            if ((t.latin||"").toLowerCase().includes(q)) return true;
            if ((t.macronized||"").toLowerCase().includes(q)) return true;
            if ((t.notes||"").toLowerCase().includes(q)) return true;
        }

        return false;
    });

    render(filtered);
});
</script>
</body>
</html>
